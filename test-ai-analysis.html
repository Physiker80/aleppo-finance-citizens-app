<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold text-white text-center mb-8">ğŸ¤– ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h1>
        
        <div class="glass rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-white mb-4">Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</h2>
            <button onclick="addTestData()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg">
                ğŸ“ Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            </button>
            <p class="text-gray-300 text-sm mt-2">Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© 4 Ø±Ø³Ø§Ø¦Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±</p>
        </div>

        <div class="glass rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-white mb-4">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h2>
            <button onclick="performAnalysis()" id="analyzeBtn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg">
                ğŸ¤– Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„
            </button>
            <div id="progress" class="mt-4 hidden">
                <div class="bg-gray-700 rounded-full h-2">
                    <div id="progressBar" class="bg-green-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
                <p class="text-white text-sm mt-2">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...</p>
            </div>
        </div>

        <div id="results" class="glass rounded-lg p-6 hidden">
            <h2 class="text-xl font-semibold text-white mb-4">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„</h2>
            <div id="resultsContent"></div>
        </div>
    </div>

    <script>
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        function addTestData() {
            const testMessages = [
                {
                    id: 'test_' + Date.now() + '_1',
                    name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                    email: 'ahmed@test.com',
                    phone: '0987654321',
                    subject: 'Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ø§Ø¬Ù„ Ø¹Ù† Ø§Ù„Ø±Ø§ØªØ¨',
                    message: 'Ø£Ø±Ø¬Ùˆ Ø§Ù„ØªÙƒØ±Ù… Ø¨Ø¥ÙØ§Ø¯ØªÙŠ Ø¹Ù† Ù…ÙˆØ¹Ø¯ ØµØ±Ù Ø±Ø§ØªØ¨ Ø´Ù‡Ø± Ø³Ø¨ØªÙ…Ø¨Ø± Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ø¬Ù„ Ù„Ø£Ù† Ù„Ø¯ÙŠ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø§Ù„ÙŠØ©',
                    department: 'Ø§Ù„Ø´Ø¤ÙˆÙ† Ø§Ù„Ù…Ø§Ù„ÙŠØ©',
                    priority: 'Ø¹Ø§Ø¬Ù„',
                    status: 'Ø¬Ø¯ÙŠØ¯',
                    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                    type: 'inquiry'
                },
                {
                    id: 'test_' + Date.now() + '_2',
                    name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ',
                    email: 'fatima@test.com',
                    phone: '0987654322',
                    subject: 'Ø´ÙƒÙˆÙ‰ Ù‡Ø§Ù…Ø© Ø­ÙˆÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©',
                    message: 'Ø£Ø¹Ø§Ù†ÙŠ Ù…Ù† Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙˆØ£Ø­ØªØ§Ø¬ Ø­Ù„ Ø³Ø±ÙŠØ¹',
                    department: 'Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚',
                    priority: 'Ù‡Ø§Ù…',
                    status: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©',
                    createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                    type: 'complaint'
                },
                {
                    id: 'test_' + Date.now() + '_3',
                    name: 'Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†',
                    email: 'mohammed@test.com',
                    phone: '0987654323',
                    subject: 'Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ù…ØªØ§Ø²Ø©',
                    message: 'Ø£Ø´ÙƒØ±ÙƒÙ… Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ø±Ø§Ù‚ÙŠ ÙˆØ§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ù…ØªØ§Ø²Ø© Ø§Ù„ØªÙŠ ØªÙ‚Ø¯Ù…ÙˆÙ†Ù‡Ø§ Ù„Ù„Ù…ÙˆØ§Ø·Ù†ÙŠÙ†',
                    department: 'Ø¹Ø§Ù…',
                    priority: 'Ø¹Ø§Ø¯ÙŠ',
                    status: 'Ù…Ø¬Ø§Ø¨',
                    createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
                    type: 'inquiry'
                },
                {
                    id: 'test_' + Date.now() + '_4',
                    name: 'Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯',
                    email: 'sara@test.com',
                    phone: '0987654324',
                    subject: 'Ø·Ù„Ø¨ Ø¹Ø§Ø¬Ù„ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø©',
                    message: 'Ø£Ø­ØªØ§Ø¬ Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ø¬Ù„ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ø¥Ø«Ø¨Ø§Øª Ø±Ø§ØªØ¨ Ù„Ù„Ø³ÙØ± ØºØ¯Ø§Ù‹',
                    department: 'Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚',
                    priority: 'Ø¹Ø§Ø¬Ù„',
                    status: 'Ø¬Ø¯ÙŠØ¯',
                    createdAt: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString(),
                    type: 'inquiry'
                }
            ];

            const existing = JSON.parse(localStorage.getItem('contactMessages') || '[]');
            const updated = [...existing, ...testMessages];
            localStorage.setItem('contactMessages', JSON.stringify(updated));
            
            alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${testMessages.length} Ø±Ø³Ø§Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!`);
        }

        // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
        async function performAnalysis() {
            const messages = JSON.parse(localStorage.getItem('contactMessages') || '[]');
            
            if (messages.length === 0) {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ù„Ù„ØªØ­Ù„ÙŠÙ„. Ø£Ø¶Ù Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹.');
                return;
            }

            const analyzeBtn = document.getElementById('analyzeBtn');
            const progress = document.getElementById('progress');
            const progressBar = document.getElementById('progressBar');
            const resultsDiv = document.getElementById('results');
            const resultsContent = document.getElementById('resultsContent');

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            resultsDiv.classList.add('hidden');
            progress.classList.remove('hidden');
            analyzeBtn.disabled = true;
            analyzeBtn.textContent = 'ğŸ¤– Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...';

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„
            let urgentCount = 0;
            let importantCount = 0;
            let normalCount = 0;
            let positiveCount = 0;
            let negativeCount = 0;
            let neutralCount = 0;
            let totalUrgency = 0;

            for (let i = 0; i < messages.length; i++) {
                const msg = messages[i];
                const text = (msg.subject + ' ' + msg.message).toLowerCase();
                
                // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
                const progressPercent = ((i + 1) / messages.length) * 100;
                progressBar.style.width = progressPercent + '%';
                
                // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± Ù„Ù„ØªØ­Ù„ÙŠÙ„
                await new Promise(resolve => setTimeout(resolve, 200));

                // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
                if (text.includes('Ø¹Ø§Ø¬Ù„') || text.includes('Ø·Ø§Ø±Ø¦') || text.includes('ÙÙˆØ±ÙŠ')) {
                    urgentCount++;
                    totalUrgency += 90;
                } else if (text.includes('Ù‡Ø§Ù…') || text.includes('Ù…Ù‡Ù…') || text.includes('Ø¶Ø±ÙˆØ±ÙŠ')) {
                    importantCount++;
                    totalUrgency += 70;
                } else {
                    normalCount++;
                    totalUrgency += 30;
                }

                // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±
                if (text.includes('Ø´ÙƒØ±Ø§') || text.includes('Ù…Ù…ØªØ§Ø²') || text.includes('Ø¬ÙŠØ¯') || text.includes('Ø±Ø§Ù‚ÙŠ')) {
                    positiveCount++;
                } else if (text.includes('Ù…Ø´ÙƒÙ„Ø©') || text.includes('Ø®Ø·Ø£') || text.includes('Ø´ÙƒÙˆÙ‰') || text.includes('Ø£Ø¹Ø§Ù†ÙŠ')) {
                    negativeCount++;
                } else {
                    neutralCount++;
                }
            }

            const averageUrgency = Math.round(totalUrgency / messages.length);

            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            progress.classList.add('hidden');
            resultsDiv.classList.remove('hidden');

            resultsContent.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div class="bg-red-900/20 p-4 rounded-lg border border-red-500/30">
                        <div class="text-2xl font-bold text-red-400 mb-1">${urgentCount}</div>
                        <div class="text-red-200">Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø§Ø¬Ù„Ø©</div>
                    </div>
                    <div class="bg-yellow-900/20 p-4 rounded-lg border border-yellow-500/30">
                        <div class="text-2xl font-bold text-yellow-400 mb-1">${importantCount}</div>
                        <div class="text-yellow-200">Ø±Ø³Ø§Ø¦Ù„ Ù‡Ø§Ù…Ø©</div>
                    </div>
                    <div class="bg-blue-900/20 p-4 rounded-lg border border-blue-500/30">
                        <div class="text-2xl font-bold text-blue-400 mb-1">${normalCount}</div>
                        <div class="text-blue-200">Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø§Ø¯ÙŠØ©</div>
                    </div>
                    <div class="bg-purple-900/20 p-4 rounded-lg border border-purple-500/30">
                        <div class="text-2xl font-bold text-purple-400 mb-1">${averageUrgency}%</div>
                        <div class="text-purple-200">Ù…ØªÙˆØ³Ø· Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¥Ù„Ø­Ø§Ø­</div>
                    </div>
                </div>

                <div class="bg-gray-800/50 p-4 rounded-lg mb-4">
                    <h4 class="text-md font-medium text-white mb-3">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</h4>
                    <div class="grid grid-cols-3 gap-4">
                        <div class="text-center">
                            <div class="text-lg font-bold text-green-400">${positiveCount}</div>
                            <div class="text-green-200 text-sm">Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©</div>
                        </div>
                        <div class="text-center">
                            <div class="text-lg font-bold text-red-400">${negativeCount}</div>
                            <div class="text-red-200 text-sm">Ø³Ù„Ø¨ÙŠØ©</div>
                        </div>
                        <div class="text-center">
                            <div class="text-lg font-bold text-gray-400">${neutralCount}</div>
                            <div class="text-gray-300 text-sm">Ù…Ø­Ø§ÙŠØ¯Ø©</div>
                        </div>
                    </div>
                </div>

                <div class="bg-blue-900/20 p-4 rounded-lg border border-blue-500/30">
                    <h4 class="text-md font-medium text-white mb-2">ğŸ’¡ ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ - Gemini 2.5 Pro</h4>
                    <ul class="text-sm text-blue-200 space-y-1">
                        ${urgentCount > 0 ? `<li>â€¢ ÙŠÙˆØ¬Ø¯ ${urgentCount} Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø§Ø¬Ù„Ø© ØªØ­ØªØ§Ø¬ Ù…Ø¹Ø§Ù„Ø¬Ø© ÙÙˆØ±ÙŠØ©</li>` : ''}
                        ${negativeCount > positiveCount ? '<li>â€¢ Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø³Ù„Ø¨ÙŠØ© Ù…Ø±ØªÙØ¹Ø© - ÙŠÙÙ†ØµØ­ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø©</li>' : ''}
                        ${averageUrgency > 70 ? '<li>â€¢ Ù…ØªÙˆØ³Ø· Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¥Ù„Ø­Ø§Ø­ Ù…Ø±ØªÙØ¹ - ÙŠÙÙ†ØµØ­ Ø¨Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯</li>' : ''}
                        <li>â€¢ ÙŠÙÙ†ØµØ­ Ø¨Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ø§Ø¬Ù„Ø© Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©</li>
                        <li>â€¢ ØªÙ… ØªØ­Ù„ÙŠÙ„ ${messages.length} Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Gemini 2.5 Pro</li>
                    </ul>
                </div>
            `;

            // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
            analyzeBtn.disabled = false;
            analyzeBtn.textContent = 'ğŸ¤– Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„';
        }
    </script>
</body>
</html>